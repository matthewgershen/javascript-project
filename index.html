<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Skyscraper</title>
    <link href="main.css" rel="stylesheet" type="text/css">
</head>
<body>

<canvas id="myCanvas" width="720" height="480"></canvas>

<script>
  const canvas = document.getElementById("myCanvas");
  const ctx = canvas.getContext("2d");



  let baseBlock = {x: 299, y: 430, width: 122, height: 50}

  function drawBaseBlock(){
    ctx.beginPath();
    ctx.rect(baseBlock.x, baseBlock.y, baseBlock.width, baseBlock.height);
    ctx.fillStyle = "#FF0000";
    ctx.fill();
    ctx.closePath();
  }


  let swingingBlock = {x: 299, y: 80, width: 122, height: 50}

  function drawSwingingBlock(){
    ctx.beginPath();
    ctx.rect(swingingBlock.x, swingingBlock.y, swingingBlock.width, swingingBlock.height);
    ctx.fillStyle = "#0000FF";
    ctx.fill();
    ctx.closePath();
  }


  let dx = 1;
  let dy = 0;
  let drop = false;
  let collision = false;

  const keyDownHandler = (e) => {
    if (e.keyCode === 32) {
      drop = true;
    }
  }


  function collisionCheck(){
    if ((swingingBlock.x < baseBlock.x + baseBlock.width &&
   swingingBlock.x + swingingBlock.width > baseBlock.x &&
   swingingBlock.y < baseBlock.y + baseBlock.height &&
   swingingBlock.y + swingingBlock.height > baseBlock.y)) {
      collision = true
    }
  }

  function draw() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    drawBaseBlock();
    drawSwingingBlock();
    if(swingingBlock.x + dx > canvas.width-200 || swingingBlock.x + dx < 100) {
       dx = -dx;
   }
    if (drop) {

      dx = dx*.9975
      dy = 1;
    }

    swingingBlock.x += dx;
    swingingBlock.y += dy;

    collisionCheck();
    if (collision) {
      drop = false
      dx = 0;
      dy = 0;
    }
  }



  document.addEventListener("keydown", keyDownHandler, false)
  setInterval(draw, 5);

</script>

</body>
</html>
